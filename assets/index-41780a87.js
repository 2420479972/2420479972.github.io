import{c as L,v as Oe,z as I,ak as X,d as B,n as G,al as z,aA as F,r as g,a as w,Q as ue,T as Te,ae as re,b as d,aj as de,N as R,t as Se,l as we,O as Ce,ad as He,g as q,aB as J,p as ne,m as Ee,J as oe,w as Ie,o as M,h as D,W as ve,X as me,V as Z,i as C,$ as fe,E as v,Z as Pe,I as pe,_ as he,y as Ne,aC as $e,G as Me,H as De}from "./index-a2b9700e.js";import{F as Be}from "./index-af9b88da.js";import{H as Ve,L as ze}from "./easy-components-93a07b2a.js";import{H as Re}from "./header-be1a4db6.js";/* empty css              *//* empty css              */import{u as _e,H as ae,c as Ae}from "./use-route-33e1c4ca.js";import{L as Fe}from "./index-0d8428fc.js";import{u as Le}from "./use-touch-b7bef329.js";import{P as Ue}from "./index-8d0cf824.js";import"./on-popup-reopen-26f038ff.js";const[Ke,k,le]=L("picker"),be= e=>e.find(n=>!n.disabled)||e[0];function Ye(e, n){const o=e[0];if(o){if(Array.isArray(o))return"multiple";if(n.children in o)return"cascade"}return"default"}function A(e, n){n=X(n,0,e.length);for(let o=n; o<e.length; o++)if(!e[o].disabled)return o;for(let o=n-1; o>=0; o--)if(!e[o].disabled)return o;return 0}const se=(e, n, o)=>n!==void 0&&!!e.find(c=>c[o.value]===n);function ee(e, n, o){const c=e.findIndex(m=>m[o.value]===n),s=A(e,c);return e[s]}function je(e, n, o){const c=[];let s={[n.children]:e},m=0;for(; s&&s[n.children];){const p=s[n.children],f=o.value[m];if(s=Oe(f)?ee(p,f,n):void 0,!s&&p.length){const r=be(p)[n.value];s=ee(p,r,n)}m++,c.push(p)}return c}function We(e){const{transform:n}=window.getComputedStyle(e),o=n.slice(7,n.length-1).split(", ")[5];return Number(o)}function Ge(e){return I({text:"text",value:"value",children:"children"},e)}const ce=200,ie=300,qe=15,[ge,Q]=L("picker-column"),xe=Symbol(ge);var Je=B({name:ge,props:{value:G,fields:z(Object),options:F(),readonly:Boolean,allowHtml:Boolean,optionHeight:z(Number),swipeDuration:z(G),visibleOptionNum:z(G)},emits:["change","clickOption","scrollInto"],setup(e, {emit:n,slots:o}){let c,s,m,p,f;const r=g(),_=g(),i=g(0),h=g(0),y=Le(),O=()=>e.options.length,b=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,T= u=>{let t=A(e.options,u);const a=-t*e.optionHeight,l=()=>{t>O()-1&&(t=A(e.options,u));const S=e.options[t][e.fields.value];S!==e.value&&n("change",S)};c&&a!==i.value?f=l:l(),i.value=a},x=()=>e.readonly||!e.options.length,K= u=>{c||x()||(f=null,h.value=ce,T(u),n("clickOption",e.options[u]))},H= u=>X(Math.round(-u/e.optionHeight),0,O()-1),V=w(()=>H(i.value)),Y=(u, t)=>{const a=Math.abs(u/t);u=i.value+a/.003*(u<0?-1:1);const l=H(u);h.value=+e.swipeDuration,T(l)},P=()=>{c=!1,h.value=0,f&&(f(),f=null)},j= u=>{if(!x()){if(y.start(u),c){const t=We(_.value);i.value=Math.min(0,t-b())}h.value=0,s=i.value,m=Date.now(),p=s,f=null}},W= u=>{if(x())return;y.move(u),y.isVertical()&&(c=!0,de(u,!0));const t=X(s+y.deltaY.value,-(O()*e.optionHeight),e.optionHeight),a=H(t);a!==V.value&&n("scrollInto",e.options[a]),i.value=t;const l=Date.now();l-m>ie&&(m=l,p=t)},N=()=>{if(x())return;const u=i.value-p,t=Date.now()-m;if(t<ie&&Math.abs(u)>qe){Y(u,t);return}const l=H(i.value);h.value=ce,T(l),setTimeout(()=>{c=!1},0)},E=()=>{const u={height:`${e.optionHeight}px`};return e.options.map((t, a)=>{const l=t[e.fields.text],{disabled:S}=t,$=t[e.fields.value],ke={role:"button",style:u,tabindex:S?-1:0,class:[Q("item",{disabled:S,selected:$===e.value}),t.className],onClick:()=>K(a)},ye={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:l};return d("li",ke,[o.option?o.option(t,a):d("div",ye,null)])})};return ue(xe),_e({stopMomentum:P}),Te(()=>{const u=c?Math.floor(-i.value/e.optionHeight):e.options.findIndex(l=>l[e.fields.value]===e.value),t=A(e.options,u),a=-t*e.optionHeight;c&&t<u&&P(),i.value=a}),re("touchmove",W,{target:r}),()=>d("div",{ref:r,class:Q(),onTouchstartPassive:j,onTouchend:N,onTouchcancel:N},[d("ul",{ref:_,style:{transform:`translate3d(0, ${i.value+b()}px, 0)`,transitionDuration:`${h.value}ms`,transitionProperty:h.value?"all":"none"},class:Q("wrapper"),onTransitionend:P},[E()])])}});const[Qe]=L("picker-toolbar"),U={title:String,cancelButtonText:String,confirmButtonText:String},Xe=["cancel","confirm","title","toolbar"],Ze=Object.keys(U);var et=B({name:Qe,props:U,emits:["confirm","cancel"],setup(e, {emit:n,slots:o}){const c=()=>{if(o.title)return o.title();if(e.title)return d("div",{class:[k("title"),"van-ellipsis"]},[e.title])},s=()=>n("cancel"),m=()=>n("confirm"),p=()=>{const r=e.cancelButtonText||le("cancel");return d("button",{type:"button",class:[k("cancel"),ae],onClick:s},[o.cancel?o.cancel():r])},f=()=>{const r=e.confirmButtonText||le("confirm");return d("button",{type:"button",class:[k("confirm"),ae],onClick:m},[o.confirm?o.confirm():r])};return()=>d("div",{class:k("toolbar")},[o.toolbar?o.toolbar():[p(),c(),f()]])}});const[tt,Vt]=L("picker-group"),nt=Symbol(tt);I({tabs:F(),activeTab:R(0),nextStepText:String},U);const ot=I({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:R(44),showToolbar:Se,swipeDuration:R(1e3),visibleOptionNum:R(6)},U),at=I({},ot,{columns:F(),modelValue:F(),toolbarPosition:we("top"),columnsFieldNames:Object});var lt=B({name:Ke,props:at,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e, {emit:n,slots:o}){const c=g(),s=g(e.modelValue.slice(0)),{parent:m}=ue(nt),{children:p,linkChildren:f}=Ce(xe);f();const r=w(()=>Ge(e.columnsFieldNames)),_=w(()=>He(e.optionHeight)),i=w(()=>Ye(e.columns,r.value)),h=w(()=>{const{columns:t}=e;switch(i.value){case"multiple":return t;case"cascade":return je(t,r.value,s);default:return[t]}}),y=w(()=>h.value.some(t=>t.length)),O=w(()=>h.value.map((t, a)=>ee(t,s.value[a],r.value))),b=w(()=>h.value.map((t, a)=>t.findIndex(l=>l[r.value.value]===s.value[a]))),T=(t, a)=>{if(s.value[t]!==a){const l=s.value.slice(0);l[t]=a,s.value=l}},x=()=>({selectedValues:s.value.slice(0),selectedOptions:O.value,selectedIndexes:b.value}),K=(t, a)=>{T(a,t),i.value==="cascade"&&s.value.forEach((l, S)=>{const $=h.value[S];se($,l,r.value)||T(S,$.length?$[0][r.value.value]:void 0)}),oe(()=>{n("change",I({columnIndex:a},x()))})},H=(t, a)=>{const l={columnIndex:a,currentOption:t};n("clickOption",I(x(),l)),n("scrollInto",l)},V=()=>{p.forEach(a=>a.stopMomentum());const t=x();return oe(()=>{n("confirm",t)}),t},Y=()=>n("cancel",x()),P=()=>h.value.map((t, a)=>d(Je,{value:s.value[a],fields:r.value,options:t,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:_.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange: l=>K(l,a),onClickOption: l=>H(l,a),onScrollInto: l=>{n("scrollInto",{currentOption:l,columnIndex:a})}},{option:o.option})),j= t=>{if(y.value){const a={height:`${_.value}px`},l={backgroundSize:`100% ${(t-_.value)/2}px`};return[d("div",{class:k("mask"),style:l},null),d("div",{class:[Ae,k("frame")],style:a},null)]}},W=()=>{const t=_.value*+e.visibleOptionNum,a={height:`${t}px`};return d("div",{ref:c,class:k("columns"),style:a},[P(),j(t)])},N=()=>{if(e.showToolbar&&!m)return d(et,Ee(ne(e,Ze),{onConfirm:V,onCancel:Y}),ne(o,Xe))};q(h, t=>{t.forEach((a, l)=>{a.length&&!se(a,s.value[l],r.value)&&T(l,be(a)[r.value.value])})},{immediate:!0});let E;return q(()=>e.modelValue, t=>{!J(t,s.value)&&!J(t,E)&&(s.value=t.slice(0),E=t.slice(0))},{deep:!0}),q(s, t=>{J(t,e.modelValue)||(E=t.slice(0),n("update:modelValue",E))},{immediate:!0}),re("touchmove",de,{target:c}),_e({confirm:V,getSelectedOptions:()=>O.value}),()=>{var t,a;return d("div",{class:k()},[e.toolbarPosition==="top"?N():null,e.loading?d(Fe,{class:k("loading")},null):null,(t=o["columns-top"])==null?void 0:t.call(o),W(),(a=o["columns-bottom"])==null?void 0:a.call(o),e.toolbarPosition==="bottom"?N():null])}}});const st=Ie(lt),ct="/assets/envelope_icon-3c64e609.png";const it={class:"envelope-select"},ut=["onClick"],rt={class:"select-text"},dt={class:"select-down"},vt=B({__name:"envelope",props:{envelopeSource:{default:()=>({})}},emits:["update:envelopeSource"],setup(e, {emit:n}){const o=[{text:"红包选择",key:"envelopeSelect",options:[{text:"杭州",value:"Hangzhou"},{text:"宁波",value:"Ningbo"},{text:"温州",value:"Wenzhou"},{text:"绍兴",value:"Shaoxing"},{text:"湖州",value:"Huzhou"}]},{text:"红包选择",key:"envelopeSelect",options:[{text:"杭州",value:"Hangzhou"},{text:"宁波",value:"Ningbo"},{text:"温州",value:"Wenzhou"},{text:"绍兴",value:"Shaoxing"},{text:"湖州",value:"Huzhou"}]}],c=g(!1);let s="";const m=n,p= _=>{var i;m("update:envelopeSource",{[s]:(i=_.selectedOptions[0])==null?void 0:i.text}),c.value=!1},f=g([]),r=(_, i)=>{i.length!==0&&(s=_,f.value=i,c.value=!0)};return(_, i)=>{const h=pe,y=st,O=Ue;return M(),D("div",it,[(M(),D(ve,null,me(o, b=>v("div",{key:b.key,class:"select-content",onClick: T=>r(b.key,b.options)},[v("div",rt,Pe(_.envelopeSource[b.key]||b.text),1),v("div",dt,[d(h,{name:"arrow-down"})])],8,ut)),64)),d(O,{show:C(c),"onUpdate:show":i[1]||(i[1]= b=>fe(c)?c.value=b:null),position:"bottom"},{default:Z(()=>[d(y,{"option-height":30,columns:C(f),onConfirm:p,onCancel:i[0]||(i[0]= b=>c.value=!1)},null,8,["columns"])]),_:1},8,["show"])])}}});const mt=he(vt,[["__scopeId","data-v-8cbf891d"]]),te= e=>(Me("data-v-8398b65f"),e=e(),De(),e),ft={class:"content"},pt={class:"top"},ht=te(()=>v("span",{class:"font-bold text-[18px] text-white"},"发红包",-1)),_t={class:"envelope-send"},bt=$e('<div class="balance-content" data-v-8398b65f><div class="balance" data-v-8398b65f><div class="balance-text" data-v-8398b65f>账户余额：</div><div class="balance-number" data-v-8398b65f>0.00 <span class="text-[22px] text-black font-bold" data-v-8398b65f>枚</span></div></div></div>',1),gt={class:"envelope-form"},xt={class:"envelope-number"},kt=te(()=>v("div",{class:"button-content"},[v("div",{class:"authorization"},[v("span",null,"授权")]),v("div",{class:"stuffed"},[v("span",null,"塞入红包")])],-1)),yt={class:"envelope-cover"},Ot=te(()=>v("div",{class:"text"},[v("img",{src:ct,alt:""}),v("span",null,"红包封面")],-1)),Tt={class:"arrowhead"},St=B({__name:"index",setup(e){const n=g({}),o=Ne({group:[{placeholder:"输入红包个数"},{placeholder:"输入红包总数"}],friends:[{placeholder:"请输入单个金额"}]}),c=g("group");return(s, m)=>{const p=Be,f=pe;return M(),D("div",ft,[v("div",pt,[d(Re,null,{close:Z(()=>[d(C(Ve),{showDot:!0})]),default:Z(()=>[ht]),_:1})]),v("main",null,[d(mt,{"envelope-source":C(n),"onUpdate:envelopeSource":m[0]||(m[0]= r=>fe(n)?n.value=r:null)},null,8,["envelope-source"]),d(C(ze)),v("div",_t,[bt,v("div",gt,[(M(!0),D(ve,null,me(C(o)[C(c)], r=>(M(),D("div",{class:"envelope-number-content",key:r.key},[v("div",xt,[d(p,{placeholder:r.placeholder},null,8,["placeholder"])])]))),128)),kt]),v("div",yt,[Ot,v("div",Tt,[d(f,{name:"arrow",size:20})])])])])])}}});const zt=he(St,[["__scopeId","data-v-8398b65f"]]);export{zt as default};
